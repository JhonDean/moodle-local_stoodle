define("local_stoodle/quiz",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=()=>{const questionSet=JSON.parse(document.getElementById("question-set").innerHTML),answerSet=JSON.parse(document.getElementById("answer-set").innerHTML),questionDiv=document.querySelector(".js-answer-area"),scoreArea=document.querySelector(".score"),quizMap=function(qSet,oSet){let resultSet=new Map;for(const qKey in Object.values(qSet)){let optionArray=[],answerArray=[];for(const oKey in Object.values(oSet)){const dbQuestionKey=parseInt(Object.values(qSet)[qKey].id),dbOptionKey=parseInt(Object.values(oSet)[oKey].stoodle_quiz_questionsid);dbQuestionKey===dbOptionKey&&(optionArray.push(Object.values(oSet)[oKey].option_text),1===parseInt(Object.values(oSet)[oKey].is_correct)&&answerArray.push(Object.values(oSet)[oKey].option_text))}resultSet.set(Object.values(qSet)[qKey].question_text,[optionArray,answerArray])}return resultSet}(questionSet,answerSet),questionTypes=function(questions,options){const questionTypesArray=new Array(Object.values(questions).length);for(const questionKey in Object.values(questions)){const questionId=parseInt(Object.values(questions)[questionKey].id);let count=0;for(const answerKey in Object.values(options)){const answerObject=Object.values(options)[answerKey];parseInt(answerObject.stoodle_quiz_questionsid)===questionId&&1===parseInt(answerObject.is_correct)&&count++}count>1?questionTypesArray[questionKey]=2:1===count&&1===parseInt(Object.values(questions)[questionKey].is_multiple_choice)?questionTypesArray[questionKey]=1:questionTypesArray[questionKey]=0}return questionTypesArray}(questionSet,answerSet);scoreArea.innerHTML=M.util.get_string("js_quiz_scoretext","local_stoodle",{current:0,total:quizMap.size}),document.querySelector(".submit-button").addEventListener("click",(()=>{!function(){const correctIcon="✅",incorrectIcon="❌";let numCorrect=0,index=0;for(const[key,value]of quizMap.entries()){const answerArray=value[1],htmlQuestionP=questionDiv.children[index].children[0],questionText=M.util.get_string("js_quiz_questiontext","local_stoodle",{num:index+1,text:key});let finalIcon=incorrectIcon;if(0===questionTypes[index]){document.getElementById("option_"+index).value===answerArray[0]&&(numCorrect++,finalIcon=correctIcon)}else if(1===questionTypes[index]){const option=document.querySelector('input[name= "'+index+'"]:checked');if(null===option)return void alert(M.util.get_string("js_quiz_unansweredtext","local_stoodle",index+1));answerArray[0]===option.value&&(numCorrect++,finalIcon=correctIcon)}else if(2===questionTypes[index]){const option=document.querySelectorAll('input[name="'+index+'"]:checked');if(option.length<1)return void alert(M.util.get_string("js_quiz_unansweredtext","local_stoodle",index+1));let selectAllCorrectCounter=0;for(let i=0;i<answerArray.length&&answerArray.length===option.length;i++)answerArray[i]===option[i].value&&selectAllCorrectCounter++;selectAllCorrectCounter===answerArray.length&&(numCorrect++,finalIcon=correctIcon)}htmlQuestionP.innerText=questionText+finalIcon,index++}scoreArea.innerText=M.util.get_string("js_quiz_scoretext","local_stoodle",{current:numCorrect,total:quizMap.size})}()}));let index=0;for(const[key,value]of quizMap.entries()){const optionArray=value[0],newDiv=document.createElement("div");newDiv.id="stoodle-div";const questionText=document.createElement("p");switch(questionText.id="stoodle-question-text",questionText.textContent=M.util.get_string("js_quiz_questiontext","local_stoodle",{num:index+1,text:key}),newDiv.appendChild(questionText),questionTypes[index]){default:case 0:newDiv.id="open-response",createOpenResponseQuestion(newDiv,"option_"+index);break;case 1:newDiv.id="multiple-choice";for(const element in value[0])createInputNode(newDiv,"option_"+index,index,optionArray[element],"radio");break;case 2:newDiv.id="select-all";for(const element in value[0])createInputNode(newDiv,"option_"+index,index,optionArray[element],"checkbox")}questionDiv.appendChild(newDiv),index++}function createOpenResponseQuestion(parent,name){const label=document.createElement("label"),textInput=document.createElement("textarea");textInput.id=name,textInput.cols=100,label.appendChild(textInput),parent.appendChild(label)}function createInputNode(parent,id,name,value,type){const input=document.createElement("input");input.type=type,input.id=id,input.name=name,input.value=value,"radio"===type&&(input.className="stoodle-radio-btn");const label=document.createElement("label");label.appendChild(input),label.appendChild(document.createTextNode(value)),parent.appendChild(label),parent.appendChild(document.createElement("br"))}}}));

//# sourceMappingURL=quiz.min.js.map