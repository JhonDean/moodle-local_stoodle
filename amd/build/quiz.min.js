define("local_stoodle/quiz",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=()=>{const questionSet=JSON.parse(document.getElementById("question-set").innerHTML),answerSet=JSON.parse(document.getElementById("answer-set").innerHTML),questionDiv=document.querySelector(".js-answer-area"),scoreArea=document.querySelector(".score"),totalQuestions=Object.values(questionSet).length,newSet=function(qSet,oSet){let resultSet=new Map;for(const qKey in Object.values(qSet)){let optionArray=[],answerArray=[];for(const oKey in Object.values(oSet))Object.values(qSet)[qKey].question_number===Object.values(oSet)[oKey].stoodle_quiz_questionsid&&(optionArray.push(Object.values(oSet)[oKey].option_text),1===parseInt(Object.values(oSet)[oKey].is_correct)&&answerArray.push(Object.values(oSet)[oKey].option_text));resultSet.set(Object.values(qSet)[qKey].question_text,[optionArray,answerArray])}return resultSet}(questionSet,answerSet),typeSet=function(questions,options){const questionTypesArray=new Array(Object.values(questions).length);for(const questionKey in Object.values(questions)){const questionId=parseInt(Object.values(questions)[questionKey].id);let count=0;for(const answerKey in Object.values(options)){const answerObject=Object.values(options)[answerKey];parseInt(answerObject.stoodle_quiz_questionsid)===questionId&&1===parseInt(answerObject.is_correct)&&count++}count>1?questionTypesArray[questionKey]=2:1===count&&1===parseInt(Object.values(questions)[questionKey].is_multiple_choice)?questionTypesArray[questionKey]=1:questionTypesArray[questionKey]=0}return questionTypesArray}(questionSet,answerSet);window.console.log(questionSet),window.console.log(answerSet),window.console.log([...newSet.entries()]),window.console.log(typeSet),window.console.log(newSet.get("q1")[0][0]),scoreArea.innerHTML="Score: 0 / "+totalQuestions,document.querySelector(".submit-button").addEventListener("click",(()=>{!function(){let numCorrect=0;for(const key in Object.values(questionSet)){const question=Object.values(questionSet)[key].id,parent=document.getElementById("option_"+question).parentElement.parentElement;let option=null;if(option="multiple-choice"===parent.id?document.querySelector('input[name = "'+question+'"]:checked'):document.getElementById("option_"+question),null===option)return void alert("Question "+(parseInt(key)+1)+" is unanswered");for(const answerKey in Object.values(answerSet)){const questionText="Question "+(parseInt(key)+1)+": "+Object.values(questionSet)[key].question_text,answerText=Object.values(answerSet)[answerKey].option_text,answerIsCorrect=parseInt(Object.values(answerSet)[answerKey].is_correct);if(answerText===option.value&&1===answerIsCorrect){window.console.log("Question "+(parseInt(key)+1)+" is correct"),numCorrect++,parent.children[0].innerText=questionText+" ✅";break}if(answerText===option.value&&0===answerIsCorrect){window.console.log("Question "+(parseInt(key)+1)+" is wrong"),parent.children[0].innerText=questionText+" ❌";break}"open-response"===parent.id&&(parent.children[0].innerText=questionText+" ❌ (manual review required)")}}scoreArea.innerText="Score: "+numCorrect+" / "+totalQuestions}()}));for(const key in Object.values(questionSet)){const newDiv=document.createElement("div");newDiv.id="stoodle-div";const questionText=document.createElement("p");questionText.id="stoodle-question-text",questionText.textContent="Question "+(parseInt(key)+1)+": "+Object.values(questionSet)[key].question_text,newDiv.appendChild(questionText),0===parseInt(Object.values(questionSet)[key].is_multiple_choice)?(newDiv.id="open-response",createOpenResponseQuestion(newDiv,"option_"+Object.values(questionSet)[key].id)):(newDiv.id="multiple-choice",createMultipleChoiceQuestion(newDiv,Object.values(questionSet)[key].id,answerSet)),questionDiv.appendChild(newDiv)}function createMultipleChoiceQuestion(parent,questionId,answerSet){for(const key in Object.values(answerSet)){Object.values(answerSet)[key].stoodle_quiz_questionsid===questionId&&createInputNode(parent,"option_"+questionId,questionId,Object.values(answerSet)[key].option_text)}}function createOpenResponseQuestion(parent,name){const label=document.createElement("label"),textInput=document.createElement("textarea");textInput.id=name,textInput.cols=100,label.appendChild(textInput),parent.appendChild(label)}function createInputNode(parent,id,name,value){const radio=document.createElement("input");radio.type="radio",radio.id=id,radio.name=name,radio.value=value;const label=document.createElement("label");label.appendChild(radio),label.appendChild(document.createTextNode(value)),parent.appendChild(label),parent.appendChild(document.createElement("br"))}}}));

//# sourceMappingURL=quiz.min.js.map